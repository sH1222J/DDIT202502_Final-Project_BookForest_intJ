<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default_layout}">
<head>
    <title>고객센터</title>
    <th:block layout:fragment="css">
        <style>
            .customer-service-container { display: flex; gap: 40px; }
            .cs-nav { flex: 0 0 200px; }
            .cs-nav ul { list-style: none; padding: 0; margin: 0; border: 1px solid var(--border-color); border-radius: 8px; overflow: hidden; }
            .cs-nav li a { display: block; padding: 15px 20px; text-decoration: none; color: var(--text-color); font-weight: 600; border-bottom: 1px solid var(--border-color); }
            .cs-nav li:last-child a { border-bottom: none; }
            .cs-nav li a.active, .cs-nav li a:hover { background-color: var(--primary-color); color: white; }
            .cs-content { flex-grow: 1; }
            .tab-content { display: none; }
            .tab-content.active { display: block; }

            /* FAQ Styles */
            .faq-item { margin-bottom: 15px; border: 1px solid #ddd; border-radius: 8px; overflow: hidden; }
            .faq-question { padding: 20px; font-weight: 600; cursor: pointer; position: relative; background-color: #f8f9fa; }
            .faq-question::after { content: '+'; position: absolute; right: 20px; font-size: 1.5rem; transition: transform 0.3s; }
            .faq-question.open::after { transform: rotate(45deg); }
            .faq-answer { padding: 20px; background-color: white; display: none; }

            /* Q&A Table Styles */
            .qna-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
            .qna-table th, .qna-table td { padding: 15px; border-bottom: 1px solid #ddd; text-align: center; }
            .qna-table th { background-color: #f8f9fa; border-top: 2px solid #333; }
            .qna-table .title { text-align: left; }
            .qna-table .title a { text-decoration: none; color: #333; }
            .qna-table .title a:hover { text-decoration: underline; }
            .qna-table tr:hover { background-color: #f1f1f1; }
            .qna-actions { text-align: right; }
        </style>
    </th:block>
</head>
<body>
<div layout:fragment="content">
    <h1>고객센터</h1>
    <div class="customer-service-container">
        <aside class="cs-nav">
            <ul>
                <li><a href="#" class="cs-nav-link active" data-tab="faq">자주하는 질문</a></li>
                <li><a href="#" class="cs-nav-link" data-tab="qna">1:1 문의</a></li>
            </ul>
        </aside>
        <section class="cs-content">
            <!-- FAQ Content -->
            <div id="faq" class="tab-content active">
                <h2>자주하는 질문 (FAQ)</h2>
                <div class="faq-item">
                    <div class="faq-question">Q. 배송은 얼마나 걸리나요?</div>
                    <div class="faq-answer">A. 주문하신 상품은 결제 완료 후 2~3일 이내에 배송됩니다. (주말, 공휴일 제외)</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">Q. 교환/환불은 어떻게 하나요?</div>
                    <div class="faq-answer">A. 상품 수령 후 7일 이내에 마이페이지 > 주문내역에서 교환/환불 신청을 하실 수 있습니다.</div>
                </div>
            </div>

            <!-- Q&A Content -->
            <div id="qna" class="tab-content">
                <h2>1:1 문의</h2>
                <table class="qna-table">
                    <thead>
                    <tr>
                        <th>번호</th>
                        <th class="title">제목</th>
                        <th>작성자</th>
                        <th>작성일</th>
                        <th>답변상태</th>
                    </tr>
                    </thead>
                    <tbody th:if="${!qnaList.isEmpty()}">
                    <tr th:each="qna, iterStat : ${qnaList}">
                        <td th:text="${iterStat.count}"></td>
                        <td class="title">
                            <a th:href="@{/qna/detail/{qnaNo}(qnaNo=${qna.qnaNo})}" th:text="${qna.qnaTitle}"></a>
                        </td>
                        <td th:text="${qna.userId}"></td>
                        <td th:text="${#temporals.format(qna.qnaRegdate, 'yyyy-MM-dd')}"></td>
                        <td th:text="${qna.qnaStatus}"></td>
                    </tr>
                    </tbody>
                    <tbody th:if="${qnaList.isEmpty()}">
                    <tr>
                        <td colspan="5">등록된 1:1 문의가 없습니다.</td>
                    </tr>
                    </tbody>
                </table>
                <div class="qna-actions">
                    <a th:href="@{/qna/question}" class="btn">문의하기</a>
                </div>
            </div>
        </section>
    </div>

    <th:block layout:fragment="script">
        <script>
        document.addEventListener('DOMContentLoaded', function() {
            const navLinks = document.querySelectorAll('.cs-nav-link');
            const tabContents = document.querySelectorAll('.tab-content');
            const faqQuestions = document.querySelectorAll('.faq-question');

            // Tab switching
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    navLinks.forEach(l => l.classList.remove('active'));
                    link.classList.add('active');

                    const tabId = link.getAttribute('data-tab');
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                        if (content.id === tabId) {
                            content.classList.add('active');
                        }
                    });
                });
            });

            // FAQ accordion
            faqQuestions.forEach(question => {
                question.addEventListener('click', () => {
                    const answer = question.nextElementSibling;
                    question.classList.toggle('open');
                    answer.style.display = answer.style.display === 'block' ? 'none' : 'block';
                });
            });
        });
        </script>
    </th:block>
</div>
</body>
</html>